{% extends "doctor/base.html" %}
{% load static %}
{% block content %}

        <!-- Page Title -->
        <div class="row no-margin-padding">
          <div class="col-md-6">
            <h3 class="block-title">Quick Statistics</h3>
          </div>
          <div class="col-md-6">
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="index.html">
                  <span class="ti-home"></span>
                </a>
              </li>
              <li class="breadcrumb-item active">Dashboard</li>
            </ol>
          </div>
        </div>
        <!-- /Page Title -->

        <!-- /Breadcrumb -->
        <!-- Main Content -->
        <div class="container-fluid home">
          <div class="row">
            <!-- Widget Item -->
            <div class="col-md-3">
              <div class="widget-area proclinic-box-shadow color-blue">
                <div class="widget-left">
                  <span class="ti-wheelchair"></span>
                </div>
                <div class="widget-right">
                  <h4 class="wiget-title">Patients</h4>
                  <span class="numeric color-blue">{{ total_patients }}</span>
                  
                </div>
              </div>
            </div>
            <!-- /Widget Item -->
            <!-- Widget Item -->
            <div class="col-md-3">
              <div class="widget-area proclinic-box-shadow color-yellow">
                <div class="widget-left">
                  <span class="ti-calendar"></span>
                </div>
                <div class="widget-right">
                  <h4 class="wiget-title">Appointments</h4>
                  <span class="numeric color-yellow">{{ total_appointments }}</span>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="widget-area proclinic-box-shadow color-green">
                <div class="widget-left">
                  <span class="ti-check"></span>
                </div>
                <div class="widget-right">
                  <h4 class="wiget-title">Approved Appointments</h4>
                  <span class="numeric color-green">{{ approved_appointments_count }}</span>
                </div>
              </div>
            </div>
            <div class="col-md-3">
              <div class="widget-area proclinic-box-shadow color-red">
                <div class="widget-left">
                  <span class="ti-close"></span>
                </div>
                <div class="widget-right">
                  <h4 class="wiget-title">Cancle Appointments</h4>
                  <span class="numeric color-red">{{ rejected_appointments_count }}</span>
                </div>
              </div>
            </div>
            <!-- /Widget Item -->
          </div>

          <div class="row">
            <!-- Widget Item -->
            <div class="col-md-12">
              <div class="widget-area-2 proclinic-box-shadow">
                <h3 class="widget-title">Appointments</h3>
                <div class="table-responsive">
                  <table class="table table-bordered table-striped">
                    <thead>
                      <tr>
                        <th>No</th>
                        <th>Patient Name</th>
                        <th>Disease</th>
                        <th>Date</th>
                        <th>Time</th>
                        <th>Status</th>
                      </tr>
                    </thead>
                    <tbody>
                      {% for appointment in appointments %}
                      <tr>
                          <td>{{ forloop.counter }}</td>
                          <td>{{ appointment.patient }}</td> <!-- Adjust if necessary -->
                          <td>{{ appointment.disease.problem_name }}</td>
                          <td>{{ appointment.appointment_date|date:'d-m-Y' }}</td>
                          <td>{{ appointment.appointment_time }}</td>
                          <td>
                              {% if appointment.status == 'P' %}
                                  <span class="badge badge-warning">Pending</span>
                              {% elif appointment.status == 'C' %}
                                  <span class="badge badge-success">Confirmed</span>
                              {% elif appointment.status == 'D' %}
                                  <span class="badge badge-primary">Completed</span>
                              {% elif appointment.status == 'X' %}
                                  <span class="badge badge-danger">Canceled</span>
                              {% else %}
                                  <span class="badge badge-secondary">Unknown</span>
                              {% endif %}
                          </td>
                      </tr>
                      {% empty %}
                      <tr>
                          <td colspan="6">No appointments found.</td>
                      </tr>
                      {% endfor %}
        </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- /Widget Item -->
          </div>

          <div class="row">
            <!-- Widget Item -->
            <div class="col-md-12">
              <div class="widget-area-2 progress-status proclinic-box-shadow">
                <h3 class="widget-title">Doctors Availability</h3>
                <div class="table-responsive">
                  <table class="table table-bordered">
                    <thead>
                      <tr>
                        <th>Doctor</th>
                        <th>Speciality</th>
                        <th>Availability</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Rajesh</td>
                        <td>Dental</td>
                        <td>
                          <span class="badge badge-success">Available</span>
                        </td>
                      </tr>
                      <tr>
                        <td>Riya</td>
                        <td>Ortho</td>
                        <td>
                          <span class="badge badge-warning">On Leave</span>
                        </td>
                      </tr>
                      <tr>
                        <td>Siri</td>
                        <td>Skin</td>
                        <td>
                          <span class="badge badge-danger">Not Available</span>
                        </td>
                      </tr>
                      <tr>
                        <td>Rajesh</td>
                        <td>Dental</td>
                        <td>
                          <span class="badge badge-success">Available</span>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- /Widget Item -->
          </div>
        </div>
        <!-- /Main Content -->
      </div>
      <!-- /Page Content -->
    </div>
  {% endblock %}